# Apache config para BeerFinder (beer.ldeluipy.es)
# Copiar a /etc/apache2/sites-available/ y activar: a2ensite beer

<VirtualHost *:80>
    ServerName beer.ldeluipy.es

    DocumentRoot /var/www/html/beerfinder/frontend

    <Directory /var/www/html/beerfinder/frontend>
        Require all granted
        AllowOverride None
    </Directory>

    # Estáticos del admin (Django) -> backend
    ProxyPass /static/admin/ http://127.0.0.1:8000/static/admin/
    ProxyPassReverse /static/admin/ http://127.0.0.1:8000/static/admin/

    # Estáticos del frontend (React: /static/js, /static/css) -> disco
    Alias /static /var/www/html/beerfinder/frontend/static
    <Directory /var/www/html/beerfinder/frontend/static>
        Require all granted
    </Directory>

    # React SPA
    FallbackResource /index.html

    # Backend
    ProxyPass /api/   http://127.0.0.1:8000/api/
    ProxyPassReverse /api/   http://127.0.0.1:8000/api/

    ProxyPass /admin/ http://127.0.0.1:8000/admin/
    ProxyPassReverse /admin/ http://127.0.0.1:8000/admin/

    ProxyPass /health/ http://127.0.0.1:8000/health/
    ProxyPassReverse /health/ http://127.0.0.1:8000/health/

    ProxyPass /media/  http://127.0.0.1:8000/media/
    ProxyPassReverse /media/  http://127.0.0.1:8000/media/
</VirtualHost>
